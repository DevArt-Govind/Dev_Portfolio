!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-gx-split-text",["exports","@angular/core","rxjs"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ng-gx-split-text"]={},t.ng.core,t.rxjs)}(this,(function(t,e,n){"use strict";var i=Object.prototype,o=i.hasOwnProperty;function s(t,e){return t===e||t!=t&&e!=e}var r={defer:!1,onlyWords:!1,mask:!1},p=function(){function t(t,e,n){this.textContent=t,this.el=e,this.options=n,this.words=[],this.chars=[],this.lineWords=[],this.lineChars=[],this.wordsArray=[],this.nodes=[],this.nodeTypes={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}return t.prototype.initSplitNodes=function(){this.splitNodes(this.el),this.initNewNodes(),this.setLines(),this.updateOnResize()},t.prototype.splitNodes=function(t){for(var e=this,n=function(n){var o=t.childNodes[n],s=-1!==[i.nodeTypes.ELEMENT_NODE,i.nodeTypes.DOCUMENT_NODE,i.nodeTypes.DOCUMENT_FRAGMENT_NODE].indexOf(o.nodeType),r=-1!==[i.nodeTypes.TEXT_NODE,i.nodeTypes.CDATA_SECTION_NODE].indexOf(o.nodeType);if(s)i.splitNodes(o);else if(r){var p=i.splitNodesIntoWords(o),l=[];p.forEach((function(t){var n=document.createElement("span");n.classList.add("split-text-word"),n.style.display="inline-block",n.style.textIndent="0",e.options.onlyWords?n.innerHTML=t.join(""):t.forEach((function(t){var i=document.createElement("span");i.classList.add("split-text-char"),i.style.display="inherit",i.style.textIndent="0",i.innerHTML=t,n.appendChild(i),e.chars.push(i)})),l.push(n),e.words.push(n)})),i.wordsArray.push(l),i.nodes.push(o)}},i=this,o=0;o<t.childNodes.length;o++)n(o)},t.prototype.initNewNodes=function(){var t=this;this.nodes.forEach((function(e,n){t.wordsArray[n].forEach((function(i,o){var s;t.options.mask?((s=document.createElement("span")).classList.add("split-text-mask"),s.style.display="inline-block",s.style.overflow="hidden",s.style.textIndent="0",s.style.verticalAlign="top",s.appendChild(i),e.parentNode.insertBefore(s,e)):e.parentNode.insertBefore(i,e);var r=document.createElement("span");r.classList.add("split-text-space"),r.style.display="inline",r.innerHTML=" ",t.options.mask?e.parentNode.insertBefore(r,s.nextSibling):e.parentNode.insertBefore(r,i.nextSibling),o===t.wordsArray[n].length-1&&e.remove()}))}))},t.prototype.splitNodesIntoWords=function(t){var e=t.textContent.split(" ");return""===e[0]&&e.splice(0,1),""===e[e.length-1]&&e.splice(e.length-1,1),e.map((function(t){return t.split("")}))},t.prototype.getLines=function(t){var e=[],n=[],i=0;return t.forEach((function(o,s){var r=t[i].getBoundingClientRect().top,p=t.length-1;o.getBoundingClientRect().top===r?(n.push(o),s===p&&e.push(n)):(e.push(n),i=s,(n=[]).push(o))})),e},t.prototype.updateOnResize=function(){var t=this;n.fromEvent(window,"resize").subscribe((function(){t.setLines()}))},t.prototype.setLines=function(){this.lineWords=this.getLines(this.words),this.options.onlyWords||(this.lineChars=this.getLines(this.chars))},t}(),l=function(){function t(t){this.el=t,this.options=r,this.init=!1}return t.prototype.ngOnInit=function(){this.setCurrentOptions(),this.initSplitNodes()},t.prototype.ngAfterViewInit=function(){this.currentOptions.defer||this.initSplit()},t.prototype.initSplit=function(){this.init?console.warn("Warning! Text is already initialized"):(this.init=!0,this.saveSrcText(),this.splitNodes.initSplitNodes())},t.prototype.saveSrcText=function(){this.srcTextContent=this.el.nativeElement.innerHTML},Object.defineProperty(t.prototype,"words",{get:function(){return this.splitNodes.words},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWords",{get:function(){return this.splitNodes.lineWords},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chars",{get:function(){if(!this.options.onlyWords)return this.splitNodes.chars;console.warn("Warning! You chose only words.")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineChars",{get:function(){if(!this.options.onlyWords)return this.splitNodes.lineChars;console.warn("Warning! You chose only words.")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeElement",{get:function(){return this.el.nativeElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"srcText",{get:function(){return this.srcTextContent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInit",{get:function(){return this.init},enumerable:!1,configurable:!0}),t.prototype.resetSplit=function(){this.nativeElement.innerHTML=this.srcText},t.prototype.setCurrentOptions=function(){this.currentOptions=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=Object(t),e.forEach((function(e){if(null!=e)for(var n in e=Object(e))if(e.hasOwnProperty(n)){var r=t[n];(void 0===r||s(r,i[n])&&!o.call(t,n))&&(t[n]=e[n])}})),t}(this.options,r)},t.prototype.initSplitNodes=function(){this.splitNodes=new p(this.el.nativeElement.textContent,this.el.nativeElement,this.currentOptions)},t}();l.decorators=[{type:e.Directive,args:[{selector:"[ngGxSplitText], ngGxSplitText"}]}],l.ctorParameters=function(){return[{type:e.ElementRef}]},l.propDecorators={options:[{type:e.Input,args:["splitOptions"]}]};var a=function(){};a.decorators=[{type:e.NgModule,args:[{declarations:[l],imports:[],exports:[l]}]}],t.NgGxSplitTextDirective=l,t.NgGxSplitTextModule=a,t.defaultOptions=r,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-gx-split-text.umd.min.js.map